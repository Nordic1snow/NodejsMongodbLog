<%@ page language="java" contentType="text/html; charset=utf-8"
	pageEncoding="utf-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>留言</title>
<link rel="stylesheet" href="bootstrap-4.4.1-dist/css/bootstrap.css">
<script src="bootstrap-4.4.1-dist/jquery-3.0.0.min.js"></script>
<script src="bootstrap-4.4.1-dist/popper.min.js"></script>
<script src="bootstrap-4.4.1-dist/js/bootstrap.js"></script>
</head>
<body>
	<div class="container">
	<!-- 导航条 -->
	<%@ include file="nav2.jsp"%>
	<!-- 导航栏 -->
	<%@ include file="nav3.jsp"%>

		<!-- 内容  -->


			<div class="col-lg-12" >


				<div class="card">
					<div class="card-header">留言生成二维码</div>
					<div class="card-body">
						<form method="post">
							<div class="form-group row">
								<label for="inputEmail3" class="col-sm-3 col-form-label">请输入留言：</label>
								<div class="col-sm-8">
									<textarea id="text" name="content" class="form-control" rows="3" required>${text}</textarea>
								</div>
							</div>

							<div class="form-group row">
								<div class="col-sm-10">
									<button type="button" class="btn btn-primary" id="btn2" >生成二维码</button>
								</div>
							</div>

						</form>
					</div>
					<div class="card-footer text-muted">
						<img id="i1" src="photo/${qrImg==null?'二维码.png':qrImg}">
						<!-- img src = "QrImage?content=${text}"-->
					</div>
				</div>


			</div>
		</div>
	<script>
		var btn = document.getElementById("btn2");
		btn.onclick = function(){
			//获取文本框的node
			var textbox= document.getElementById("text");
			//要生成二维码的文本内容
			var text = textbox.value;
			
			//异步 服务器响应后在执行回调函数 参数
			$.get("QrAjaxAction",{qr_text:text},function(data){
				//回调函数
				var img = document.getElementById("i1");
				img.src = "photo/"+data;
				
			})
			
			//alert(textbox.value);
		}
		
	</script>

</body>
</html>